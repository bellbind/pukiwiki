PukiWiki SETTING
$Id: SETTING.txt,v 1.4 2006/09/26 14:47:51 henoheno Exp $


設定の調整とカスタマイズ
========================

概要
    PukiWikiの設定は、管理者がPHPスクリプトを編集する事によって行います。
    通常は以下に示す代表的なファイルの中に設定を行います。

    PukiWikiのパッケージに含まれているPHPスクリプトは(あれば、基本的に)EUC-
    JPで、また改行コードLFで記述されています。(UTF-8版の場合は全てUTF-8/LF
    で記述されています)
    スクリプトを直接編集する場合は、文字コードと改行コードを判別でき、それを
    維持できるテキストエディタを使用して下さい。

    主な設定は以下で行います。
        実行開始地点       : index.php
        全体設定           : pukiwiki.ini.php
        ユーザ定義         : rules.ini.php

    ユーザーエージェントのグループ(profile)ごとにも設定が用意されています。
        デスクトップPC     : default.ini.php
        携帯電話およびPDA  : keitai.ini.php

    メッセージの多くは言語ごとにまとめられています。
        英語(en)向け       : en.lng.php
        日本語(ja)向け     : ja.lng.php

    スキン(デザイン部分)独自の設定項目は skin/<スキン名称>.skin.php の先頭
    にあります。

    プラグイン独自の設定項目は plugin/<プラグイン名称>.inc.php の先頭にあり
    ます。


PHP言語について

    PHP言語について詳しくはPHPマニュアルを参照して下さい。
    http://jp.php.net/manual/ja/

    PukiWikiの設定項目は、基本的に '定数' と '変数' によって表現されていま
    す。

正規表現について

    PHP言語は、Perl 5互換の正規表現をサポートしています。
    http://jp.php.net/manual/ja/reference.pcre.pattern.syntax.php

    PukiWikiの設定項目のいくつかは、"あるパターンに一致する(任意の)文字列"
    を表現するために正規表現を利用しています。

実行開始地点 (index.php)
    このファイルにWebブラウザ経由でアクセスする事により、PukiWiki が実行さ
    れます。いくつかの設定項目は、このファイル中で事前に指定する事ができま
    す。これにより、全体の挙動をあらかじめ強制する事ができます。

    このファイルを異なる名称で複数用意し、それぞれ設定の内容を変えておくこ
    とで、使い分けが可能になります。

        例: 全てのページに編集認証をかけた上、index.php では PKWK_READONLY
          を有効に、secret.php では PKWK_READONLY を 無効に する事によって
          限られたメンバーだけ編集できる環境を構築する事ができます。

    PHP error_reporting() 関数
        障害の切り分けを行いたい場合、
            error_reporting(E_ALL);
        と記述する事により、通常は表示されないエラーを表示させる事ができます。

    設定項目(定数)の事前定義
        以下に挙げる設定項目(定数)は、このファイルで事前に定義する事ができ
        ます。
            PKWK_READONLY
            PKWK_SAFE_MODE
            PKWK_OPTIMISE
            PKWK_DISABLE_INLINE_IMAGE_FROM_URI
            PKWK_QUERY_STRING_MAX
            TDIARY_THEME
        個々の項目の詳細は pukiwiki.ini.php の説明を参照して下さい。

    ディレクトリ設定
        この値を調整する事により、異なる場所にあるPukiWiki本体を呼び出す事
        ができます。例えば、PukiWiki本体をWebブラウザからアクセスできない場
        所に設置し、Webブラウザからアクセスできる場所には実行開始地点だけを
        用意する事ができます。

        LIB_DIR
            PukiWikiの共通ライブラリが設置されている場所をサーバー内の絶対
            パス、または相対パスでで指定します。

        DATA_HOME
            一本のPukiWikiに関する独自の部分(設定項目、採用しているプラグイ
            ン等)を格納する場所をサーバー内の絶対パス、または相対パスでで指
            定します。


設定の修正
    PukiWikiの管理者パスワードは、pukiwiki.ini.php にある変数 $adminpass
    です。簡単に試すだけであるならば、以下のような内容で充分でしょう。
     ('YourPassWord' の部分を、あなただけのキーワードで置き換えて下さい)

        $adminpass = '{x-php-md5}' . md5('YourPassWord');

      ※設定を「有効にする」とは、多くの場合、設定値を数字の 0 でない値(例え
        ば1)にする事です。一部の設定は名前に DISABLE ないし $noXXX とあります
        が、それらは値を 0 でないものにすることで、その設定値に対応する機能が
        無効になります。(無効にする役割が有効になります)

      ※インターネットに公開するPukiWikiであるならば、PKWK_SAFE_MODE を有効に
        することをお薦めします。(詳細:BugTrack/787)

      ※他人に編集させない環境をご要望であれば、PKWK_READONLY を有効にするこ
        とをお薦めします。(詳細:BugTrack/744)

スキンの変更または調整
    スキン(外見の骨組み)に関する設定項目は skin/スキン名.skin.php の先頭にあ
    ります。

    付属のtDiaryスキンに切り替える事によって、tDiary用のテーマを使用する事が
    できます。詳しくは BugTrack/769 を参照して下さい。
 
    その他、ユーザーが作成した独自のスキンについては
    [[official:自作スキン]] を参照して下さい。
    http://pukiwiki.sourceforge.jp/?%E8%87%AA%E4%BD%9C%E3%82%B9%E3%82%AD%E3%83%B3


デザインの調整
    必要に応じて、さらに設定やデザインを調整して下さい。

    ※デフォルトのスキンの場合、CSSは skin/スキン名.css.php が出力します。こ
      れは目的に応じたCSSを出力することのできる、単独のPHPスクリプトです。
      これを静的なファイルにしたい場合は、Webブラウザで出力結果を取り出して
      下さい。どのようなCSSが求められているかはスキンに記述されています。
